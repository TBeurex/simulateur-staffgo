<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">
  <title>Simulateur Staff - Go ‚Äî Eurex</title>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'DM Sans', sans-serif; background: #f5f5f0; }
    input, textarea, select, button { font-family: 'DM Sans', sans-serif; }
    input[type=range] { -webkit-appearance: none; height: 6px; background: #e2e2dd; border-radius: 3px; outline: none; width: 100%; }
    input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; width: 22px; height: 22px; border-radius: 50%; background: #01B400; cursor: pointer; border: 3px solid #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.15); }
    input[type=number]::-webkit-inner-spin-button { -webkit-appearance: none; }
    .mod-card { transition: all 0.15s ease; }
    .mod-card:hover { box-shadow: 0 2px 12px rgba(0,0,0,0.06); }
    select { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 12px center; padding-right: 32px !important; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useRef, useMemo } = React;

    const CABINETS = [
      { name: "EUREX CRMD VALENCE", address: "105 Rue des Mourettes, 26002 VALENCE" },
      { name: "EUREX EYBENS", address: "8 Rue Rolland Garros, 38320 EYBENS" },
      { name: "EUREX CHAMBERY-VOGLANS", address: "40 Rue de la Fran√ßon, 73420 CHAMBERY-VOGLANS" },
      { name: "EUREX FIDUCIAIRE EUROPEENNE ALBERTVILLE", address: "15 Rue de la R√©publique, 73200 ALBERTVILLE" },
      { name: "EUREX EFE", address: "3 Rue du Champ de la Vigne, 74603 SEYNOD CEDEX" },
      { name: "EUREX GUINET", address: "53 Rue Vauban, 69006 LYON" },
      { name: "EUREX NORMANDIE FECAMP", address: "Parc des Hautes Falaises, 76403 FECAMP" },
      { name: "EUREX NORMANDIE SAINT VALERY EN CAUX", address: "21 Route de Dieppe, 76460 SAINT VALERY EN CAUX" },
      { name: "EUREX PELLETIER AMBERIEU", address: "12 Place du 8 Mai 1945, 01500 AMBERIEU EN BUGEY" },
      { name: "EUREX PELLETIER BOURG EN BRESSE", address: "541 Rue L√©opold Le Hon, 01000 BOURG EN BRESSE" },
      { name: "EUREX ROANNE", address: "92 Boulevard Jean-Baptiste Cl√©ment, 42300 ROANNE" },
      { name: "EUREX ISERE LE BOURG D'OISANS", address: "16 Rue de la R√©publique, 38520 LE BOURG D'OISANS" },
      { name: "EUREX ISERE BOURGOIN JALLIEU", address: "25 Avenue Gambetta, 38300 BOURGOIN JALLIEU" },
      { name: "EUREX FHG GRENOBLE EYBENS", address: "8 Rue Roland Garros, 38320 EYBENS" },
      { name: "EUREX DAVEZIEUX", address: "Centre du Mas, 57 Rue des Pins, 07430 DAVEZIEUX" },
      { name: "EUREX ALSACE", address: "18 Avenue de Hollande, 68315 MULHOUSE ILLZACH" },
      { name: "EUREX THONON LES BAINS", address: "6 Avenue du G√©n√©ral de Gaulle, 74204 THONON LES BAINS" },
      { name: "EUREX PARIS", address: "12 Rue du 4 Septembre, 75002 PARIS" },
      { name: "EUREX ANNEMASSE", address: "11 Rue d'Etrembi√®res, 74100 ANNEMASSE" },
      { name: "EUREX AUBENAS", address: "51 Avenue de Bellande, 07200 AUBENAS" },
      { name: "EUREX MOUTIERS", address: "63 Rue Basse de la Gare, 73600 MOUTIERS" },
      { name: "EUREX SUD LYONNAIS", address: "146 Rue des 4 Chemins, 69390 MILLERY" },
      { name: "EUREX ACFEG", address: "18 Rue Anatole France, 69200 VENISSIEUX" },
      { name: "EUREX CHETTRIT", address: "18 Rue Anatole France, 69200 VENISSIEUX" },
    ];

    const MODULES = [
      { id: "rh", name: "Gestion collaborative RH", subtitle: "Core RH, Portail salari√©, GED, Embauche, DPAE", essentiel: { cabinet: 0, client: 0.3 }, avance: { cabinet: 1, client: 1.7 }, implFee: 300 },
      { id: "conges", name: "Cong√©s et absences", subtitle: "Demandes, workflows, planning, compteurs", essentiel: { cabinet: 0, client: 0.3 }, avance: { cabinet: 1, client: 1.7 }, implFee: 150 },
      { id: "temps", name: "Gestion des temps", subtitle: "Saisie des temps, workflows d'approbation", essentiel: { cabinet: 0, client: 0.3 }, avance: { cabinet: 1, client: 1.7 }, implFee: 500 },
      { id: "evp", name: "√âl√©ments variables de paie", subtitle: "Saisie EVP, tableau de bord, transmission vocale", essentiel: { cabinet: 0, client: 0.5 }, avance: { cabinet: 0, client: 0.5 }, implFee: 150 },
      { id: "bulletins", name: "Distribution des bulletins (e-Coffre)", subtitle: "GED, e-coffre salari√©", essentiel: { cabinet: 0, client: 0 }, avance: { cabinet: 0.5, client: 0.7 }, implFee: 75 },
      { id: "communication", name: "Communication", subtitle: "Distribution documents, accus√© de r√©ception", essentiel: { cabinet: 0, client: 0.1 }, avance: { cabinet: 0.4, client: 0.6 }, implFee: 50 },
      { id: "entretiens", name: "Entretiens RH", subtitle: "Entretiens illimit√©s, trames, campagnes, relances", essentiel: { cabinet: 0, client: 0.2 }, avance: { cabinet: 1, client: 1.7 }, implFee: 100 },
      { id: "notes", name: "Notes de frais", subtitle: "Saisie, workflows, export, archivage", essentiel: { cabinet: 0, client: 0.2 }, avance: { cabinet: "special", client: "special", specialLabel: "3,00 ‚Ç¨ HT / utilisateur / mois", specialClientLabel: "4,00 ‚Ç¨ HT / utilisateur / mois" }, implFee: 100 },
    ];

    const API_SILAE = { cabinet: 0.3, client: 0.3 };
    const TVA_RATE = 0.20;
    const A = "#01B400";
    const AL = "#01B40015";
    const AM = "#01B40030";

    const fmt = (n) => new Intl.NumberFormat("fr-FR", { style: "currency", currency: "EUR" }).format(n);
    const fmtDate = (d) => new Intl.DateTimeFormat("fr-FR", { day: "2-digit", month: "long", year: "numeric" }).format(d);

    function App() {
      const [step, setStep] = useState(1);
      const [cabinetIdx, setCabinetIdx] = useState(-1);
      const [modules, setModules] = useState(
        MODULES.reduce((acc, m) => ({ ...acc, [m.id]: { enabled: m.id === "rh" || m.id === "conges" || m.id === "evp", mode: "essentiel" } }), {})
      );
      const [nbBulletins, setNbBulletins] = useState(50);
      const [clientName, setClientName] = useState("");
      const [clientCompany, setClientCompany] = useState("");
      const [showCosts, setShowCosts] = useState(true);
      const printRef = useRef();

      const toggleModule = (id) => setModules((s) => ({ ...s, [id]: { ...s[id], enabled: !s[id].enabled } }));
      const setModuleMode = (id, mode) => setModules((s) => ({ ...s, [id]: { ...s[id], mode } }));
      const selectedCabinet = cabinetIdx >= 0 ? CABINETS[cabinetIdx] : null;

      const calc = useMemo(() => {
        let clientPerBulletin = 0, cabinetPerBulletin = 0, totalImplFees = 0;
        const details = [];
        MODULES.forEach((mod) => {
          const state = modules[mod.id];
          if (!state.enabled) return;
          const pricing = mod[state.mode];
          totalImplFees += mod.implFee;
          if (pricing.client === "special") { details.push({ ...mod, isSpecial: true, pricing, selectedMode: state.mode }); return; }
          clientPerBulletin += pricing.client;
          cabinetPerBulletin += pricing.cabinet;
          details.push({ ...mod, isSpecial: false, pricing, selectedMode: state.mode });
        });
        clientPerBulletin += API_SILAE.client;
        cabinetPerBulletin += API_SILAE.cabinet;
        const clientMonthly = clientPerBulletin * nbBulletins;
        const cabinetMonthly = cabinetPerBulletin * nbBulletins;
        const margeMonthly = clientMonthly - cabinetMonthly;
        const clientAnnual = clientMonthly * 12;
        const margeAnnual = margeMonthly * 12;
        const margePercent = clientMonthly > 0 ? ((margeMonthly / clientMonthly) * 100) : 0;
        const totalHTAnnual = clientAnnual + totalImplFees;
        const totalTVA = totalHTAnnual * TVA_RATE;
        const totalTTC = totalHTAnnual + totalTVA;
        return { clientPerBulletin, cabinetPerBulletin, clientMonthly, cabinetMonthly, margeMonthly, margePercent, clientAnnual, margeAnnual, totalImplFees, totalHTAnnual, totalTVA, totalTTC, details };
      }, [modules, nbBulletins]);

      const handlePrint = () => {
        const content = printRef.current;
        const win = window.open("", "_blank");
        win.document.write(`<html><head><title>Devis Staff-Go</title>
          <style>
            @import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap');
            *{margin:0;padding:0;box-sizing:border-box}
            body{font-family:'DM Sans',sans-serif;color:#1e293b;padding:40px;background:#fff;font-size:13px}
            @media print{body{padding:20px;font-size:12px}}
          </style></head><body>${content.innerHTML}</body></html>`);
        win.document.close();
        setTimeout(() => win.print(), 500);
      };

      const enabledCount = Object.values(modules).filter((m) => m.enabled).length;
      const inputStyle = { width: "100%", padding: "10px 14px", background: "#fafaf7", border: "1px solid #e2e2dd", borderRadius: 8, color: "#1e293b", fontSize: 14, outline: "none" };
      const labelStyle = { fontSize: 12, color: "#94a3b8", display: "block", marginBottom: 6 };
      const card = { background: "#fff", borderRadius: 14, border: "1px solid #e8e8e3", padding: 22, marginBottom: 16 };
      const kpiCard = { background: "#fafaf7", borderRadius: 10, padding: 16, border: "1px solid #eeeeea", flex: 1 };
      const kpiLabel = { fontSize: 10, textTransform: "uppercase", letterSpacing: 1, color: "#94a3b8", marginBottom: 6 };
      const kpiValue = { fontSize: 22, fontWeight: 700, color: "#1e293b", fontVariantNumeric: "tabular-nums", lineHeight: 1 };

      // ‚îÄ‚îÄ‚îÄ STEP 1 ‚îÄ‚îÄ‚îÄ
      if (step === 1) {
        return (
          <div style={{ minHeight: "100vh", padding: 24, color: "#1e293b" }}>
            <div style={{ maxWidth: 920, margin: "0 auto" }}>
              <div style={{ textAlign: "center", marginBottom: 36 }}>
                <div style={{ display: "inline-flex", alignItems: "center", gap: 8, background: AL, borderRadius: 50, padding: "6px 20px", border: `1px solid ${AM}`, marginBottom: 12 }}>
                  <div style={{ width: 8, height: 8, borderRadius: "50%", background: A }}></div>
                  <span style={{ fontSize: 11, letterSpacing: 2, textTransform: "uppercase", color: A, fontWeight: 600 }}>Simulateur Staff - Go</span>
                </div>
                <h1 style={{ fontSize: 30, fontWeight: 700, letterSpacing: -0.5 }}>Configurez votre offre</h1>
                <p style={{ color: "#94a3b8", marginTop: 6, fontSize: 14 }}>Choisissez le mode par module et simulez le tarif client</p>
              </div>

              <div style={card}>
                <h3 style={{ fontSize: 10, textTransform: "uppercase", letterSpacing: 2, color: A, marginBottom: 14, fontWeight: 700 }}>Cabinet √©metteur</h3>
                <select value={cabinetIdx} onChange={(e) => setCabinetIdx(Number(e.target.value))} style={{ ...inputStyle, cursor: "pointer" }}>
                  <option value={-1}>‚Äî S√©lectionnez votre cabinet ‚Äî</option>
                  {CABINETS.map((c, i) => <option key={i} value={i}>{c.name}</option>)}
                </select>
                {selectedCabinet && (
                  <div style={{ marginTop: 10, fontSize: 13, color: "#64748b", padding: "8px 14px", background: "#fafaf7", borderRadius: 8 }}>üìç {selectedCabinet.address}</div>
                )}
              </div>

              <div style={card}>
                <h3 style={{ fontSize: 10, textTransform: "uppercase", letterSpacing: 2, color: A, marginBottom: 14, fontWeight: 700 }}>Client</h3>
                <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 14 }}>
                  <div>
                    <label style={labelStyle}>Raison sociale</label>
                    <input type="text" value={clientCompany} onChange={(e) => setClientCompany(e.target.value)} placeholder="Raison sociale" style={inputStyle} />
                  </div>
                  <div>
                    <label style={labelStyle}>Nom du contact</label>
                    <input type="text" value={clientName} onChange={(e) => setClientName(e.target.value)} placeholder="Nom du contact" style={inputStyle} />
                  </div>
                </div>
              </div>

              <div style={card}>
                <h3 style={{ fontSize: 10, textTransform: "uppercase", letterSpacing: 2, color: A, marginBottom: 14, fontWeight: 700 }}>Volume mensuel</h3>
                <div style={{ display: "flex", alignItems: "center", gap: 20 }}>
                  <input type="range" min={1} max={500} value={nbBulletins} onChange={(e) => setNbBulletins(Number(e.target.value))} />
                  <div style={{ display: "flex", alignItems: "baseline", gap: 6 }}>
                    <input type="number" value={nbBulletins} min={1} onChange={(e) => setNbBulletins(Math.max(1, Number(e.target.value)))}
                      style={{ width: 76, textAlign: "center", padding: "8px 10px", fontSize: 20, fontWeight: 700, color: A, background: AL, border: `2px solid ${AM}`, borderRadius: 10, outline: "none" }} />
                    <span style={{ fontSize: 13, color: "#94a3b8" }}>bulletins / mois</span>
                  </div>
                </div>
              </div>

              <div style={card}>
                <h3 style={{ fontSize: 10, textTransform: "uppercase", letterSpacing: 2, color: A, marginBottom: 16, fontWeight: 700 }}>Modules ‚Äî choisissez le mode par module</h3>
                <div style={{ display: "flex", flexDirection: "column", gap: 8 }}>
                  {MODULES.map((mod) => {
                    const state = modules[mod.id];
                    const pricing = mod[state.mode];
                    const isSpecial = pricing.client === "special";
                    return (
                      <div key={mod.id} className="mod-card" style={{
                        display: "flex", alignItems: "center", gap: 14, padding: "14px 16px", borderRadius: 12,
                        background: state.enabled ? "#fafaf7" : "#fff",
                        border: state.enabled ? `1px solid ${AM}` : "1px solid #eeeeea",
                        opacity: state.enabled ? 1 : 0.5,
                      }}>
                        <button onClick={() => toggleModule(mod.id)} style={{
                          width: 40, height: 24, borderRadius: 12, border: "none", cursor: "pointer",
                          background: state.enabled ? A : "#d4d4cf", position: "relative", transition: "background 0.2s", flexShrink: 0,
                        }}>
                          <div style={{ width: 18, height: 18, borderRadius: "50%", background: "#fff", position: "absolute", top: 3, left: state.enabled ? 19 : 3, transition: "left 0.2s", boxShadow: "0 1px 3px rgba(0,0,0,0.15)" }} />
                        </button>
                        <div style={{ flex: 1, minWidth: 0 }}>
                          <div style={{ fontSize: 14, fontWeight: 600 }}>{mod.name}</div>
                          <div style={{ fontSize: 11, color: "#94a3b8", marginTop: 2 }}>{mod.subtitle}</div>
                          {state.enabled && <div style={{ fontSize: 11, color: "#b45309", marginTop: 3 }}>Impl√©mentation : {mod.implFee} ‚Ç¨ HT</div>}
                        </div>
                        {state.enabled && (
                          <div style={{ display: "flex", gap: 4, flexShrink: 0 }}>
                            {["essentiel", "avance"].map((m) => (
                              <button key={m} onClick={() => setModuleMode(mod.id, m)} style={{
                                padding: "5px 14px", borderRadius: 8, fontSize: 12, fontWeight: 600, border: "none", cursor: "pointer",
                                background: state.mode === m ? A : "#eeeeea", color: state.mode === m ? "#fff" : "#64748b", transition: "all 0.15s",
                              }}>{m === "essentiel" ? "Essentiel" : "Avanc√©"}</button>
                            ))}
                          </div>
                        )}
                        <div style={{ textAlign: "right", minWidth: 80, flexShrink: 0 }}>
                          {state.enabled && (<>
                            <div style={{ fontSize: 16, fontWeight: 700, color: A, fontVariantNumeric: "tabular-nums" }}>{isSpecial ? "‚Äî" : `${pricing.client.toFixed(2)} ‚Ç¨`}</div>
                            {isSpecial ? <div style={{ fontSize: 10, color: "#94a3b8", lineHeight: 1.2 }}>{pricing.specialClientLabel}</div> : <div style={{ fontSize: 10, color: "#94a3b8" }}>/ bulletin</div>}
                          </>)}
                        </div>
                      </div>
                    );
                  })}
                  <div style={{ display: "flex", alignItems: "center", gap: 14, padding: "12px 16px", borderRadius: 12, background: AL, border: `1px solid ${AM}` }}>
                    <div style={{ width: 40, flexShrink: 0, textAlign: "center", fontSize: 16 }}>üîó</div>
                    <div style={{ flex: 1 }}>
                      <span style={{ fontSize: 14, fontWeight: 600 }}>API Silae</span>
                      <span style={{ fontSize: 12, color: "#94a3b8", marginLeft: 8 }}>Connecteur ‚Äî inclus automatiquement</span>
                    </div>
                    <div style={{ textAlign: "right", minWidth: 80 }}>
                      <div style={{ fontSize: 16, fontWeight: 700, color: A }}>0.30 ‚Ç¨</div>
                      <div style={{ fontSize: 10, color: "#94a3b8" }}>/ bulletin</div>
                    </div>
                  </div>
                </div>
              </div>

              {/* ‚îÄ‚îÄ‚îÄ SYNTHESE + COUTS CABINET ‚îÄ‚îÄ‚îÄ */}
              <div style={{ ...card, border: `2px solid ${A}`, padding: 0, overflow: "hidden" }}>
                {/* Synth√®se de l'offre */}
                <div style={{ padding: "22px 24px", borderBottom: "1px solid #eeeeea" }}>
                  <h3 style={{ fontSize: 10, textTransform: "uppercase", letterSpacing: 2, color: A, marginBottom: 16, fontWeight: 700 }}>Synth√®se de l'offre</h3>
                  <div style={{ display: "flex", gap: 14 }}>
                    <div style={kpiCard}>
                      <div style={kpiLabel}>Prix client / bulletin</div>
                      <div style={{ ...kpiValue, color: A, fontSize: 26 }}>{fmt(calc.clientPerBulletin)}</div>
                      <div style={{ fontSize: 11, color: "#94a3b8", marginTop: 6, paddingTop: 6, borderTop: "1px solid #eeeeea" }}>
                        Abonnement mensuel : <strong style={{ color: "#1e293b" }}>{fmt(calc.clientMonthly)}</strong>
                      </div>
                    </div>
                    <div style={kpiCard}>
                      <div style={kpiLabel}>Frais d'impl√©mentation (paiement unique)</div>
                      <div style={kpiValue}>{fmt(calc.totalImplFees)}</div>
                    </div>
                  </div>
                </div>

                {/* Co√ªts cabinet et marge */}
                <div style={{ padding: "22px 24px" }}>
                  <button onClick={() => setShowCosts(!showCosts)} style={{
                    background: "none", border: "none", cursor: "pointer", fontSize: 10, color: "#64748b", fontWeight: 700,
                    display: "flex", alignItems: "center", gap: 6, padding: 0, marginBottom: showCosts ? 16 : 0,
                    textTransform: "uppercase", letterSpacing: 2,
                  }}>
                    <span style={{ transform: showCosts ? "rotate(90deg)" : "rotate(0)", transition: "0.2s", display: "inline-block", fontSize: 8 }}>‚ñ∂</span>
                    Co√ªts cabinet et marge
                  </button>
                  {showCosts && (
                    <div style={{ display: "flex", gap: 14 }}>
                      <div style={kpiCard}>
                        <div style={kpiLabel}>Co√ªt cabinet / bulletin</div>
                        <div style={kpiValue}>{fmt(calc.cabinetPerBulletin)}</div>
                      </div>
                      <div style={kpiCard}>
                        <div style={kpiLabel}>Marge / mois</div>
                        <div style={kpiValue}>{fmt(calc.margeMonthly)}</div>
                      </div>
                      <div style={kpiCard}>
                        <div style={kpiLabel}>Marge annuelle</div>
                        <div style={kpiValue}>{fmt(calc.margeAnnual)}</div>
                      </div>
                      <div style={kpiCard}>
                        <div style={kpiLabel}>Taux de marge</div>
                        <div style={kpiValue}>{calc.margePercent.toFixed(1)}%</div>
                      </div>
                    </div>
                  )}
                </div>
              </div>

              <div style={{ textAlign: "center" }}>
                <button onClick={() => setStep(2)} disabled={enabledCount === 0 || cabinetIdx < 0} style={{
                  background: (enabledCount > 0 && cabinetIdx >= 0) ? A : "#ccc", border: "none", color: "#fff", padding: "14px 48px", borderRadius: 12,
                  fontSize: 16, fontWeight: 700, cursor: (enabledCount > 0 && cabinetIdx >= 0) ? "pointer" : "not-allowed",
                  boxShadow: (enabledCount > 0 && cabinetIdx >= 0) ? `0 4px 20px ${A}50` : "none",
                }}>Aper√ßu devis et export PDF ‚Üí</button>
                {cabinetIdx < 0 && <p style={{ color: "#f59e0b", fontSize: 13, marginTop: 8 }}>S√©lectionnez un cabinet √©metteur pour continuer</p>}
              </div>
            </div>
          </div>
        );
      }

      // ‚îÄ‚îÄ‚îÄ STEP 2 ‚îÄ‚îÄ‚îÄ
      const today = new Date();
      const validUntil = new Date(today); validUntil.setMonth(validUntil.getMonth() + 2);

      return (
        <div style={{ minHeight: "100vh", padding: 24, color: "#1e293b" }}>
          <div style={{ maxWidth: 920, margin: "0 auto" }}>
            <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 20 }}>
              <button onClick={() => setStep(1)} style={{ background: "#fff", border: "1px solid #e2e2dd", color: "#64748b", padding: "10px 20px", borderRadius: 8, cursor: "pointer", fontSize: 14, fontWeight: 500 }}>‚Üê Retour au simulateur</button>
              <button onClick={handlePrint} style={{ background: A, border: "none", color: "#fff", padding: "12px 32px", borderRadius: 10, fontSize: 15, fontWeight: 700, cursor: "pointer", boxShadow: `0 4px 20px ${A}50` }}>üìÑ Exporter en PDF</button>
            </div>

            <div style={{ background: "#fff", borderRadius: 16, padding: "48px 44px", boxShadow: "0 4px 24px rgba(0,0,0,0.06)", border: "1px solid #e8e8e3" }}>
              <div ref={printRef}>
                <div>
                  <div style={{ display: "flex", justifyContent: "space-between", alignItems: "flex-start", marginBottom: 28, paddingBottom: 20, borderBottom: `3px solid ${A}` }}>
                    <div>
                      <h1 style={{ fontSize: 26, fontWeight: 700, margin: 0 }}>DEVIS</h1>
                      <p style={{ fontSize: 13, color: "#94a3b8", marginTop: 2 }}>Solution Staff - Go / Gestion RH collaborative</p>
                    </div>
                    <div style={{ textAlign: "right", fontSize: 13, color: "#64748b" }}>
                      <div style={{ fontWeight: 600, color: "#1e293b" }}>Date : {fmtDate(today)}</div>
                      <div>Validit√© : {fmtDate(validUntil)}</div>
                    </div>
                  </div>

                  <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 20, marginBottom: 28 }}>
                    <div style={{ background: "#f8f8f5", borderRadius: 8, padding: "14px 18px" }}>
                      <div style={{ fontSize: 10, textTransform: "uppercase", letterSpacing: 1.5, color: "#94a3b8", marginBottom: 6 }}>√âmetteur</div>
                      <div style={{ fontSize: 15, fontWeight: 600 }}>{selectedCabinet?.name}</div>
                      <div style={{ fontSize: 13, color: "#64748b", marginTop: 2 }}>{selectedCabinet?.address}</div>
                    </div>
                    <div style={{ background: "#f8f8f5", borderRadius: 8, padding: "14px 18px" }}>
                      <div style={{ fontSize: 10, textTransform: "uppercase", letterSpacing: 1.5, color: "#94a3b8", marginBottom: 6 }}>Client</div>
                      {clientCompany && <div style={{ fontSize: 15, fontWeight: 600 }}>{clientCompany}</div>}
                      {clientName && <div style={{ fontSize: 13, color: "#64748b", marginTop: 2 }}>{clientName}</div>}
                    </div>
                  </div>

                  <div style={{ fontSize: 14, color: "#64748b", marginBottom: 24, padding: "10px 14px", background: "#fafaf7", borderRadius: 8, border: "1px solid #eeeeea" }}>
                    Volume estim√© : <strong style={{ color: "#1e293b" }}>{nbBulletins} bulletins de paie / mois</strong>
                    &nbsp;‚Äî&nbsp;D√©lai de mise en ≈ìuvre : <strong style={{ color: "#1e293b" }}>1 mois</strong> √† compter de la signature
                  </div>

                  <div style={{ fontSize: 12, fontWeight: 700, textTransform: "uppercase", letterSpacing: 1, color: "#1e293b", marginBottom: 10 }}>1. Abonnement mensuel</div>
                  <table style={{ width: "100%", borderCollapse: "collapse", marginBottom: 24 }}>
                    <thead><tr>
                      <th style={{ background: A, color: "#fff", padding: "9px 14px", fontSize: 11, textTransform: "uppercase", letterSpacing: 1, textAlign: "left", borderRadius: "8px 0 0 0" }}>Module</th>
                      <th style={{ background: A, color: "#fff", padding: "9px 14px", fontSize: 11, textTransform: "uppercase", letterSpacing: 1, textAlign: "center" }}>Mode</th>
                      <th style={{ background: A, color: "#fff", padding: "9px 14px", fontSize: 11, textTransform: "uppercase", letterSpacing: 1, textAlign: "right", borderRadius: "0 8px 0 0" }}>Tarif / bulletin HT</th>
                    </tr></thead>
                    <tbody>
                      {calc.details.map((d, i) => (
                        <tr key={d.id} style={{ background: i % 2 === 1 ? "#fafaf7" : "transparent" }}>
                          <td style={{ padding: "10px 14px", borderBottom: "1px solid #eeeeea", fontSize: 13, fontWeight: 500 }}>{d.name}</td>
                          <td style={{ padding: "10px 14px", borderBottom: "1px solid #eeeeea", textAlign: "center" }}>
                            <span style={{ display: "inline-block", padding: "2px 10px", borderRadius: 6, fontSize: 11, fontWeight: 600, background: d.selectedMode === "avance" ? `${A}18` : "#f1f1ed", color: d.selectedMode === "avance" ? A : "#64748b" }}>{d.selectedMode === "essentiel" ? "Essentiel" : "Avanc√©"}</span>
                          </td>
                          <td style={{ padding: "10px 14px", borderBottom: "1px solid #eeeeea", textAlign: "right", fontWeight: 600, fontVariantNumeric: "tabular-nums", fontSize: 13 }}>
                            {d.isSpecial ? d.pricing.specialClientLabel : `${d.pricing.client.toFixed(2)} ‚Ç¨`}
                          </td>
                        </tr>
                      ))}
                      <tr style={{ background: calc.details.length % 2 === 1 ? "#fafaf7" : "transparent" }}>
                        <td style={{ padding: "10px 14px", borderBottom: "1px solid #eeeeea", fontSize: 13, fontWeight: 500 }}>API Silae (connecteur paie)</td>
                        <td style={{ padding: "10px 14px", borderBottom: "1px solid #eeeeea", textAlign: "center" }}><span style={{ fontSize: 11, color: "#94a3b8" }}>‚Äî</span></td>
                        <td style={{ padding: "10px 14px", borderBottom: "1px solid #eeeeea", textAlign: "right", fontWeight: 600, fontVariantNumeric: "tabular-nums", fontSize: 13 }}>0.30 ‚Ç¨</td>
                      </tr>
                    </tbody>
                  </table>
                  <div style={{ display: "flex", justifyContent: "flex-end", marginBottom: 28 }}>
                    <div style={{ width: 340 }}>
                      <div style={{ display: "flex", justifyContent: "space-between", padding: "5px 0", fontSize: 13, color: "#64748b" }}>
                        <span>Total / bulletin HT</span><span style={{ fontWeight: 600, color: "#1e293b", fontVariantNumeric: "tabular-nums" }}>{fmt(calc.clientPerBulletin)}</span>
                      </div>
                      <div style={{ display: "flex", justifyContent: "space-between", padding: "5px 0", fontSize: 13, color: "#64748b" }}>
                        <span>Estimation mensuelle HT ({nbBulletins} bulletins)</span><span style={{ fontWeight: 600, color: "#1e293b", fontVariantNumeric: "tabular-nums" }}>{fmt(calc.clientMonthly)}</span>
                      </div>
                      <div style={{ display: "flex", justifyContent: "space-between", padding: "5px 0", fontSize: 14, fontWeight: 700, color: A, borderTop: `1px solid ${AM}`, marginTop: 4, paddingTop: 8 }}>
                        <span>Estimation annuelle HT</span><span style={{ fontVariantNumeric: "tabular-nums" }}>{fmt(calc.clientAnnual)}</span>
                      </div>
                    </div>
                  </div>

                  <div style={{ fontSize: 12, fontWeight: 700, textTransform: "uppercase", letterSpacing: 1, color: "#1e293b", marginBottom: 10 }}>2. Frais d'impl√©mentation (paiement unique)</div>
                  <table style={{ width: "100%", borderCollapse: "collapse", marginBottom: 24 }}>
                    <thead><tr>
                      <th style={{ background: "#64748b", color: "#fff", padding: "9px 14px", fontSize: 11, textTransform: "uppercase", letterSpacing: 1, textAlign: "left", borderRadius: "8px 0 0 0" }}>Module</th>
                      <th style={{ background: "#64748b", color: "#fff", padding: "9px 14px", fontSize: 11, textTransform: "uppercase", letterSpacing: 1, textAlign: "right", borderRadius: "0 8px 0 0" }}>Montant HT</th>
                    </tr></thead>
                    <tbody>
                      {calc.details.map((d, i) => (
                        <tr key={d.id} style={{ background: i % 2 === 1 ? "#fafaf7" : "transparent" }}>
                          <td style={{ padding: "9px 14px", borderBottom: "1px solid #eeeeea", fontSize: 13 }}>{d.name}</td>
                          <td style={{ padding: "9px 14px", borderBottom: "1px solid #eeeeea", textAlign: "right", fontWeight: 600, fontVariantNumeric: "tabular-nums", fontSize: 13 }}>{fmt(d.implFee)}</td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                  <div style={{ display: "flex", justifyContent: "flex-end", marginBottom: 32 }}>
                    <div style={{ width: 340 }}>
                      <div style={{ display: "flex", justifyContent: "space-between", padding: "5px 0", fontSize: 14, fontWeight: 700, color: "#64748b" }}>
                        <span>Total impl√©mentation HT</span><span style={{ fontVariantNumeric: "tabular-nums" }}>{fmt(calc.totalImplFees)}</span>
                      </div>
                    </div>
                  </div>

                  <div style={{ background: "#f8f8f5", borderRadius: 10, padding: 20, marginBottom: 28, border: "1px solid #eeeeea" }}>
                    <div style={{ fontSize: 12, fontWeight: 700, textTransform: "uppercase", letterSpacing: 1, color: "#1e293b", marginBottom: 12 }}>R√©capitulatif g√©n√©ral (1√®re ann√©e)</div>
                    <div style={{ display: "flex", justifyContent: "flex-end" }}>
                      <div style={{ width: 340 }}>
                        <div style={{ display: "flex", justifyContent: "space-between", padding: "5px 0", fontSize: 13, color: "#64748b" }}>
                          <span>Abonnement annuel HT</span><span style={{ fontVariantNumeric: "tabular-nums", fontWeight: 500 }}>{fmt(calc.clientAnnual)}</span>
                        </div>
                        <div style={{ display: "flex", justifyContent: "space-between", padding: "5px 0", fontSize: 13, color: "#64748b" }}>
                          <span>Frais d'impl√©mentation HT</span><span style={{ fontVariantNumeric: "tabular-nums", fontWeight: 500 }}>{fmt(calc.totalImplFees)}</span>
                        </div>
                        <div style={{ display: "flex", justifyContent: "space-between", padding: "5px 0", fontSize: 14, fontWeight: 600, color: "#1e293b", borderTop: "1px solid #ddd", marginTop: 4, paddingTop: 8 }}>
                          <span>Total HT</span><span style={{ fontVariantNumeric: "tabular-nums" }}>{fmt(calc.totalHTAnnual)}</span>
                        </div>
                        <div style={{ display: "flex", justifyContent: "space-between", padding: "5px 0", fontSize: 13, color: "#64748b" }}>
                          <span>TVA (20%)</span><span style={{ fontVariantNumeric: "tabular-nums" }}>{fmt(calc.totalTVA)}</span>
                        </div>
                        <div style={{ display: "flex", justifyContent: "space-between", padding: "5px 0", fontSize: 18, fontWeight: 700, color: A, borderTop: `2px solid ${A}`, marginTop: 4, paddingTop: 8 }}>
                          <span>Total TTC</span><span style={{ fontVariantNumeric: "tabular-nums" }}>{fmt(calc.totalTTC)}</span>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div style={{ fontSize: 12, color: "#64748b", lineHeight: 1.8, marginBottom: 28, padding: "14px 18px", background: "#fafaf7", borderRadius: 8, border: "1px solid #eeeeea" }}>
                    <div style={{ fontWeight: 600, color: "#1e293b", marginBottom: 6 }}>Conditions</div>
                    <div>‚Ä¢ <strong>Dur√©e de validit√© :</strong> Ce devis est valable jusqu'au {fmtDate(validUntil)} (2 mois).</div>
                    <div>‚Ä¢ <strong>TVA :</strong> Taux applicable de 20%.</div>
                    <div>‚Ä¢ <strong>D√©lai de mise en ≈ìuvre :</strong> 1 mois √† compter de la date de signature du pr√©sent devis.</div>
                    <div>‚Ä¢ <strong>Engagement contractuel :</strong> Le pr√©sent devis, une fois sign√© et rev√™tu de la mention ¬´ Bon pour accord ¬ª, vaut engagement contractuel entre les parties.</div>
                  </div>

                  <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 24, marginBottom: 28 }}>
                    <div style={{ border: "1px solid #ddd", borderRadius: 8, padding: 18 }}>
                      <div style={{ fontSize: 11, textTransform: "uppercase", letterSpacing: 1, color: "#94a3b8", marginBottom: 12 }}>Le prestataire</div>
                      <div style={{ fontSize: 13, fontWeight: 500, marginBottom: 4 }}>{selectedCabinet?.name}</div>
                      <div style={{ fontSize: 12, color: "#94a3b8", marginBottom: 20 }}>Date :</div>
                      <div style={{ borderBottom: "1px dotted #ccc", height: 50 }}></div>
                      <div style={{ fontSize: 11, color: "#94a3b8", marginTop: 6 }}>Signature</div>
                    </div>
                    <div style={{ border: "1px solid #ddd", borderRadius: 8, padding: 18 }}>
                      <div style={{ fontSize: 11, textTransform: "uppercase", letterSpacing: 1, color: "#94a3b8", marginBottom: 12 }}>Le client</div>
                      <div style={{ fontSize: 13, fontWeight: 500, marginBottom: 4 }}>{clientCompany || "‚Äî"}</div>
                      <div style={{ fontSize: 12, color: "#94a3b8", marginBottom: 4 }}>Date :</div>
                      <div style={{ fontSize: 12, color: "#1e293b", fontStyle: "italic", marginBottom: 12 }}>Mention manuscrite ¬´ Bon pour accord ¬ª</div>
                      <div style={{ borderBottom: "1px dotted #ccc", height: 50 }}></div>
                      <div style={{ fontSize: 11, color: "#94a3b8", marginTop: 6 }}>Signature</div>
                    </div>
                  </div>

                  <div style={{ textAlign: "center", paddingTop: 16, borderTop: "1px solid #eeeeea", fontSize: 11, color: "#94a3b8" }}>
                    Devis g√©n√©r√© le {fmtDate(today)} ‚Äî Tarifs HT par bulletin de paie ‚Äî Staff - Go / Eurex
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById("root"));
  </script>
</body>
</html>

